---
import { SITE_CONFIG } from '../config';

interface Props {
  title?: string;
}

const { title = SITE_CONFIG.SITE_TITLE } = Astro.props;
---

<section class="comments">
  <h2 class="comments-title">Comments</h2>
  <div
    id="cusdis_thread"
    data-host="https://cusdis.com"
    data-app-id={SITE_CONFIG.CUSDIS_APP_ID}
    data-page-id={Astro.url.pathname}
    data-page-url={Astro.url.href}
    data-page-title={title}
    data-theme="auto"
  ></div>
</section>

<script is:inline src="https://cusdis.com/js/cusdis.es.js" async defer></script>

<style>
  .comments {
    margin-top: var(--space-xl);
    padding-top: var(--space-xl);
    border-top: 1px solid var(--color-border);
  }

  .comments-title {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: var(--space-lg);
  }

  :global(#cusdis_thread iframe) {
    min-height: 450px !important;
  }
</style>
